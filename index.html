<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Words - Изучение английских слов</title>
<link rel="stylesheet" href="styles.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <h1 class="app-title">English Words</h1>
      <div class="header-actions">
        <button class="theme-toggle" id="themeToggle" data-testid="theme-toggle">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </header>

  <main class="main-content">
    <!-- About -->
    <section id="about" class="content-section active">
      <div class="section-header">
        <h2>О приложении</h2>
      </div>
      <div class="about-content">
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-graduation-cap"></i></div>
          <h3>Изучение по уровням</h3>
          <p>Структурированное изучение английских слов от начального до продвинутого уровня (A1–C2)</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-volume-up"></i></div>
          <h3>Произношение</h3>
          <p>Прослушивание правильного произношения слов (британский и американский акценты)</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
          <h3>Отслеживание прогресса</h3>
          <p>Учет изученных слов и прогресс по уровням</p>
        </div>
        <div class="author-info">
          <h3>Об авторе методики</h3>
          <p>Приложение создано на основе методики <strong>Абдуррахима Бердиева</strong>.</p>
          <a href="https://berdiyev-eng.tilda.ws/" target="_blank" class="author-link">
            <i class="fas fa-external-link-alt"></i> Узнать больше об авторе
          </a>
        </div>
      </div>
    </section>

    <!-- Levels + Categories -->
    <section id="levels" class="content-section">
      <div class="section-header">
        <h2>Слова по уровням</h2>
      </div>

      <div class="levels-grid" id="levelsGrid">
        <div class="level-card" data-level="A1" data-testid="level-card-A1">
          <div class="level-badge beginner">A1</div>
          <h3>Beginner</h3>
          <p>Базовые слова для начинающих</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
        <div class="level-card" data-level="A2" data-testid="level-card-A2">
          <div class="level-badge elementary">A2</div>
          <h3>Elementary</h3>
          <p>Элементарный уровень</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
        <div class="level-card" data-level="B1" data-testid="level-card-B1">
          <div class="level-badge intermediate">B1</div>
          <h3>Intermediate</h3>
          <p>Средний уровень</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
        <div class="level-card" data-level="B2" data-testid="level-card-B2">
          <div class="level-badge upper-intermediate">B2</div>
          <h3>Upper-Intermediate</h3>
          <p>Выше среднего</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
        <div class="level-card" data-level="C1" data-testid="level-card-C1">
          <div class="level-badge advanced">C1</div>
          <h3>Advanced</h3>
          <p>Продвинутый уровень</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
        <div class="level-card" data-level="C2" data-testid="level-card-C2">
          <div class="level-badge proficiency">C2</div>
          <h3>Proficiency</h3>
          <p>Профессиональный уровень</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
      </div>

      <!-- Categories -->
      <div class="section-header" style="margin-top:1rem;">
        <h2>Категории</h2>
      </div>
      <div class="levels-grid" id="categoriesGrid">
        <div class="level-card" data-category="IRREGULARS" data-testid="category-card-irregulars">
          <div class="level-badge advanced">Irregular Verbs</div>
          <h3>Неправильные глаголы</h3>
          <p>Формы глаголов</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
        <div class="level-card" data-category="PREPOSITIONS" data-testid="category-card-prepositions">
          <div class="level-badge elementary">Prepositions</div>
          <h3>Предлоги</h3>
          <p>Частые предлоги</p>
          <div class="level-stats"><span class="word-count">0 слов</span></div>
        </div>
      </div>

      <!-- Words List (levels or categories) -->
      <div id="wordsContainer" class="words-container hidden">
        <div class="words-header">
          <button class="back-btn" id="backToLevels" data-testid="back-to-levels">
            <i class="fas fa-arrow-left"></i>
            Назад
          </button>
          <h3 id="currentLevelTitle">Слова</h3>
          <div class="level-bulk-actions">
            <button id="addAllLevelBtn" class="action-btn add-btn" title="Добавить все" data-testid="add-all-level-btn">
              <i class="fas fa-plus"></i>
            </button>
            <button id="removeAllLevelBtn" class="action-btn remove-btn" title="Удалить все" data-testid="remove-all-level-btn">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
        <div id="wordsList" class="words-list"></div>
      </div>
    </section>

    <!-- Learning -->
    <section id="learning" class="content-section">
      <div class="section-header">
        <h2>Изучаю</h2>
        <div class="section-stats"><span id="learningCount">0 слов</span></div>
      </div>

      <p class="mode-help">
        Фото для карточек рандомные (1.jpg - 100.jpg).<br>
        Если фото отсутствует — подставится /nophoto.jpg (положите файл nophoto.jpg в корень).<br>
        * Флешкарточки — показывается слово и перевод; ответ скрыт до нажатия.<br>
        * Quiz — одно слово и 2–4 варианта; правильное слово произносится после ответа.<br>
        * Запланировано/Бесконечно — режимы практики.
      </p>

      <div class="toggles-row">
        <div class="mode-toggle" role="tablist" aria-label="study mode">
          <button class="mode-btn active" data-mode="flashcards" id="modeFlashcards" data-testid="mode-flashcards">Флешкарточки</button>
          <button class="mode-btn" data-mode="quiz" id="modeQuiz" data-testid="mode-quiz">Quiz</button>
          <button class="mode-btn" data-mode="list" id="modeList" data-testid="mode-list">Список слов</button>
        </div>
        <div class="practice-toggle" role="tablist" aria-label="practice mode">
          <button class="practice-btn active" data-practice="scheduled" id="practiceScheduled" data-testid="practice-scheduled">Запланировано</button>
          <button class="practice-btn" data-practice="endless" id="practiceEndless" data-testid="practice-endless">Бесконечно</button>
        </div>
      </div>

      <div id="learningWordsList" class="words-list">
        <div class="empty-state">
          <i class="fas fa-book-open"></i>
          <h3>Пока нет слов для изучения</h3>
          <p>Добавьте слова из списка по уровням или создайте новые</p>
        </div>
      </div>
    </section>

    <!-- New Words -->
    <section id="new-words" class="content-section">
      <div class="section-header">
        <h2>Новые слова</h2>
      </div>

      <!-- Single add -->
      <div class="add-word-form">
        <div class="form-group">
          <label for="newWord">Английское слово</label>
          <input type="text" id="newWord" placeholder="Введите слово на английском" data-testid="new-word-input">
        </div>
        <div class="form-group">
          <label for="newTranslation">Перевод</label>
          <input type="text" id="newTranslation" placeholder="Введите перевод" data-testid="new-translation-input">
        </div>
        <div class="form-group">
          <label for="newLevel">Уровень</label>
          <select id="newLevel" data-testid="new-level-select">
            <option value="A1">A1 - Beginner</option>
            <option value="A2">A2 - Elementary</option>
            <option value="B1">B1 - Intermediate</option>
            <option value="B2">B2 - Upper-Intermediate</option>
            <option value="C1">C1 - Advanced</option>
            <option value="C2">C2 - Proficiency</option>
            <option value="IRREGULARS">Irregular Verbs</option>
            <option value="PREPOSITIONS">Prepositions</option>
          </select>
        </div>
        <button class="add-word-btn" id="addWordBtn" data-testid="add-word-btn">
          <i class="fas fa-plus"></i>
          Добавить слово
        </button>
      </div>

      <!-- Bulk add -->
      <div class="add-word-form" id="bulkAddForm">
        <h3 style="margin-bottom:8px;">Массовое добавление</h3>
        <p class="mode-help" id="bulkHelp" data-testid="bulk-help">
          Формат (каждая строка):<br>
          english word - перевод1, перевод2, перевод3<br>
          Важно: все значения через запятую относятся к последнему слову, пока не встретится новое « - ». Примеры:<br>
          go - идти, ходить, ехать<br>
          table - стол<br>
          run - бежать, запускать, управлять<br>
          Уровень из селектора применится ко всем строкам ниже.
        </p>
        <div class="form-group">
          <label for="bulkLevel">Уровень для всех слов</label>
          <select id="bulkLevel" data-testid="bulk-level-select">
            <option value="A1">A1 - Beginner</option>
            <option value="A2">A2 - Elementary</option>
            <option value="B1">B1 - Intermediate</option>
            <option value="B2">B2 - Upper-Intermediate</option>
            <option value="C1">C1 - Advanced</option>
            <option value="C2">C2 - Proficiency</option>
            <option value="IRREGULARS">Irregular Verbs</option>
            <option value="PREPOSITIONS">Prepositions</option>
          </select>
        </div>
        <div class="form-group">
          <label for="bulkTextarea">Вставьте строки</label>
          <textarea id="bulkTextarea" rows="6" placeholder="go - идти, ехать, ходить&#10;table - стол&#10;run - бежать, запускать" data-testid="bulk-textarea" style="width:100%;padding:0.75rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);color:var(--text-primary);"></textarea>
        </div>
        <button class="add-word-btn" id="bulkAddBtn" data-testid="bulk-add-btn">
          <i class="fas fa-file-import"></i>
          Добавить список
        </button>
      </div>

      <div id="customWordsList" class="words-list">
        <h3>Добавленные слова</h3>
        <div id="customWords">
          <div class="empty-state">
            <i class="fas fa-plus-circle"></i>
            <h3>Нет добавленных слов</h3>
            <p>Используйте формы выше для добавления новых слов</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Games -->
    <section id="games" class="content-section">
      <div class="section-header">
        <h2>Игры</h2>
      </div>

      <div class="games-grid">
        <!-- RACE -->
        <div class="game-card">
          <img src="race.jpg" alt="Гонки" class="game-cover" onerror="this.src='nophoto.jpg'">
          <div class="game-info">
            <h3>Гонки — бесконечно</h3>
            <p>Уворачивайся от трафика. Чтобы начать и продолжить — ответь правильно на 3 слова.</p>
            <button class="btn btn-primary" id="raceStartBtn" data-testid="race-start-btn">Старт</button>
          </div>
        </div>

        <!-- GEOMETRY DASH -->
        <div class="game-card">
          <img src="dash.jpg" alt="Cube Dash" class="game-cover" onerror="this.src='nophoto.jpg'">
          <div class="game-info">
            <h3>Cube Dash</h3>
            <p>Раннер в стиле Geometry Dash. Начало/продолжение — после 3 правильных ответов.</p>
            <button class="btn btn-primary" id="dashStartBtn" data-testid="dash-start-btn">Старт</button>
          </div>
        </div>

        <!-- 2048 -->
        <div class="game-card">
          <img src="2048.jpg" alt="2048" class="game-cover" onerror="this.src='nophoto.jpg'">
          <div class="game-info">
            <h3>2048</h3>
            <p>Классическая головоломка. Собери плитку 2048!</p>
            <button class="btn btn-primary" id="game2048StartBtn" data-testid="2048-start-btn">Старт</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Progress -->
    <section id="progress" class="content-section">
      <div class="section-header">
        <h2>Прогресс</h2>
      </div>
      <div id="progressContent" class="progress-content"></div>
    </section>
  </main>

  <nav class="bottom-nav" id="bottomNav">
    <button class="nav-item active" type="button" data-section="about" data-testid="nav-about" onclick="window.app && app.switchSection('about')">
      <i class="fas fa-info-circle"></i><span>О приложении</span>
    </button>
    <button class="nav-item" type="button" data-section="levels" data-testid="nav-levels" onclick="window.app && app.switchSection('levels')">
      <i class="fas fa-layer-group"></i><span>Уровни</span>
    </button>
    <button class="nav-item" type="button" data-section="learning" data-testid="nav-learning" onclick="window.app && app.switchSection('learning')">
      <i class="fas fa-book-reader"></i><span>Изучаю</span>
    </button>
    <button class="nav-item" type="button" data-section="new-words" data-testid="nav-new-words" onclick="window.app && app.switchSection('new-words')">
      <i class="fas fa-plus"></i><span>Новые</span>
    </button>
    <button class="nav-item" type="button" data-section="games" data-testid="nav-games" onclick="window.app && app.switchSection('games')">
      <i class="fas fa-gamepad"></i><span>Игры</span>
    </button>
    <button class="nav-item" type="button" data-section="progress" data-testid="nav-progress" onclick="window.app && app.switchSection('progress')">
      <i class="fas fa-chart-line"></i><span>Прогресс</span>
    </button>
  </nav>
</div>

<audio id="audioPlayer" preload="none"></audio>

<script src="oxford_words_data.js"></script>
<script src="app.js"></script>
</body>
</html>
